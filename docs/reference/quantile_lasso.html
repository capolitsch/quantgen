<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Quantile lasso — quantile_lasso • quantgen</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Quantile lasso — quantile_lasso" />
<meta property="og:description" content="Compute quantile lasso solutions." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">quantgen</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/quantgen.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/cross_validation.html">1. Cross-validation</a>
    </li>
    <li>
      <a href="../articles/noncrossing_constraints.html">2. Noncrossing constraints</a>
    </li>
    <li>
      <a href="../articles/quantile_extrapolation.html">3. Quantile extrapolation</a>
    </li>
    <li>
      <a href="../articles/quantile_stacking.html">4. Quantile stacking</a>
    </li>
    <li>
      <a href="../articles/mathematical_details.html">5. Mathematical details</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ryantibs/quantgen/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Quantile lasso</h1>
    <small class="dont-index">Source: <a href='https://github.com/ryantibs/quantgen/blob/master/R/quantile_lasso.R'><code>R/quantile_lasso.R</code></a></small>
    <div class="hidden name"><code>quantile_lasso.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Compute quantile lasso solutions.</p>
    </div>

    <pre class="usage"><span class='fu'>quantile_lasso</span>(
  <span class='no'>x</span>,
  <span class='no'>y</span>,
  <span class='no'>tau</span>,
  <span class='no'>lambda</span>,
  <span class='kw'>weights</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>no_pen_vars</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(),
  <span class='kw'>intercept</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>standardize</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>lb</span> <span class='kw'>=</span> -<span class='fl'>Inf</span>,
  <span class='kw'>ub</span> <span class='kw'>=</span> <span class='fl'>Inf</span>,
  <span class='kw'>noncross</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>x0</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>lp_solver</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"glpk"</span>, <span class='st'>"gurobi"</span>),
  <span class='kw'>time_limit</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>warm_starts</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>params</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(),
  <span class='kw'>transform</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>inv_trans</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>jitter</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Matrix of predictors. If sparse, then passing it an appropriate 
sparse <code>Matrix</code> class can greatly help optimization.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>Vector of responses.</p></td>
    </tr>
    <tr>
      <th>tau, lambda</th>
      <td><p>Vectors of quantile levels and tuning parameter values. If
these are not of the same length, the shorter of the two is recycled so
that they become the same length. Then, for each <code>i</code>, we solve a
separate quantile lasso problem at quantile level <code>tau[i]</code> and tuning
parameter value <code>lambda[i]</code>. The most common use cases are: specifying
one tau value and a sequence of lambda values; or specifying a sequence of
tau values and one lambda value.</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>Vector of observation weights (to be used in the loss
function). Default is NULL, which is interpreted as a weight of 1 for each
observation.</p></td>
    </tr>
    <tr>
      <th>no_pen_vars</th>
      <td><p>Indices of the variables that should be excluded from the
lasso penalty. Default is <code><a href='https://rdrr.io/r/base/c.html'>c()</a></code>, which means that no variables are to
be excluded.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with the following components:</p>
<dt>beta</dt><dd><p>Matrix of lasso coefficients, of dimension = (number of
  features + 1) x (number of quantile levels) assuming <code>intercept=TRUE</code>,
  else (number of features) x (number of quantile levels). Note: these
  coefficients will always be on the appropriate scale; they are always on
  the scale of original features, even if <code>standardize=TRUE</code></p></dd>
  <dt>status</dt><dd><p>Vector of status flags returned by Gurobi's or GLPK's LP
  solver, of length = (number of quantile levels)</p></dd>
  <dt>tau,lambda</dt><dd><p>Vectors of tau and lambda values used</p></dd>
  <dt>weights,no_pen_vars,...,jitter</dt><dd><p>Values of these other arguments  
  used in the function call</p></dd>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function solves the quantile lasso problem, for each pair of
  quantile level \(\tau\) and tuning parameter \(\lambda\):  
  $$\mathop{\mathrm{minimize}}_{\beta_0,\beta} \;
  \sum_{i=1}^n w_i \psi_\tau(y_i-\beta_0-x_i^T\beta) + \lambda \|\beta\|_1$$    
  for a response vector \(y\) with components \(y_i\), and predictor
  matrix \(X\) with rows \(x_i\). Here \(\psi_\tau(v) = \max\{\tau v, 
  (\tau-1) v\}\) is the "pinball" or "tilted \(\ell_1\)" loss. When
  noncrossing constraints are applied, we instead solve one big joint
  optimization, over all quantile levels and tuning parameter values: 
  $$\mathop{\mathrm{minimize}}_{\beta_{0k}, \beta_k, k=1,\ldots,r} \; 
  \sum_{k=1}^r \bigg(\sum_{i=1}^n w_i \psi_{\tau_k}(y_i-\beta_{0k}-
  x_i^T\beta_k) + \lambda_k \|\beta_k\|_1\bigg)$$ 
  $$\mathrm{subject \; to} \;\; \beta_{0k}+x^T\beta_k \leq
  \beta_{0,k+1}+x^T\beta_{k+1} \;\; k=1,\ldots,r-1, \; x \in \mathcal{X}$$
  where the quantile levels \(\tau_j, j=1,\ldots,k\) are assumed to be in
  increasing order, and \(\mathcal{X}\) is a collection of points over
  which to enforce the noncrossing constraints.</p>
<p>Either problem is readily converted into a linear program (LP), and solved
  using either Gurobi (which is free for academic use, and generally fast) or
  GLPK (which free for everyone, but slower).</p>
<p>All arguments not described above are as in the <code>quantile_genlasso</code>
  function. The associated <code>coef</code> and <code>predict</code> functions are just
  those for the <code>quantile_genlasso</code> class.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Ryan Tibshirani, Logan Brooks.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


